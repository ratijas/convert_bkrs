#!/usr/bin/env python
# -*- coding: utf-8 -*-
'''testing for color.py'''

import sys
import unittest

sys.path.append('../')
import color

class SearchPinYinTestCase(unittest.TestCase):
    def setUp(self):
        self.s = u'bǎiwén bùrú yījiàn // fāng’àn // fǎngán // xúniang'
    def tearDown(self):
        pass
    def testBaiwenBuruYijian(self):
        r = color.search_for_pin_yin_in_string(self.s)
        
class ColorizeTestCase(unittest.TestCase):
    def testBasics(self):
        baiwen = u'bǎiwén'
        expected = u'<span class="t3">bǎi</span><span class="t2">wén</span>'
        self.failUnlessEqual(color.colorize(baiwen), expected)
    


class DetermineToneTestCase(unittest.TestCase):
    def testFristTone(self):
        self.failUnlessEqual(1, color.determineTone('fāng'))
        self.failUnlessEqual(1, color.determineTone('yī'))
    def testSecondTone(self):
        self.failUnlessEqual(2, color.determineTone('gán'))
        self.failUnlessEqual(2, color.determineTone('xún'))
    def testThirdTone(self):
        self.failUnlessEqual(3, color.determineTone('fǎn'))
        self.failUnlessEqual(3, color.determineTone('lǚ'))
    def testFourthTone(self, ):
        self.failUnlessEqual(4, color.determineTone('àn'))
        self.failUnlessEqual(4, color.determineTone('dìnggòu'))
    def testZeroTone(self):
        self.failUnlessEqual(0, color.determineTone('de'))
        self.failUnlessEqual(0, color.determineTone('ning'))
    def testNonPinYin(self):
        self.failUnlessEqual(0, color.determineTone('бурда'))
    
    


def main():
	s = u'bǎiwén bùrú yījiàn // fāng’àn // fǎngán // xúniang'
	print u'изначально: "%s"' % s
	r = search_for_pin_yin_in_string( s )
	print u'search_for_pin_yin_in_string() ->'
	for e in r:
		print u'\t' u'start: %d,' u'\t' u'value: %s' % \
			( e[ 'start' ], u( e[ 'value' ]))

	print u'colorize\n----'

	s2 = colorize( s )
	print u'type is', type( s2 )
	print s2

if __name__ == '__main__':
    unittest.main()